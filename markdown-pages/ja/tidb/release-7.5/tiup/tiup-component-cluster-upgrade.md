---
title: tiup cluster upgrade
summary: tiup cluster upgradeコマンドは、指定されたクラスターを特定のバージョンにアップグレードするために使用されます。入力として、クラスター名とターゲット バージョンが必要です。オプションには、エラーを無視してクラスターを起動する--force 、ノード移行の最大待機時間を設定する--transfer-timeout 、構成チェックをスキップする --ignore-config-check、クラスターを再起動せずにバイナリ ファイルを置き換える--offlineなどがあります。出力は、アップグレードの進行状況のログです。
---

# tiup cluster upgrade {#tiup-cluster-upgrade}

`tiup cluster upgrade`コマンドは、指定されたクラスターを特定のバージョンにアップグレードするために使用されます。

## 構文 {#syntax}

```shell
tiup cluster upgrade <cluster-name> <version> [flags]
```

-   `<cluster-name>` : 操作対象のクラスター名。クラスター名を忘れた場合は、 [クラスターリスト](/tiup/tiup-component-cluster-list.md)コマンドで確認できます。
-   `<version>` : アップグレードするターゲットバージョン (例: `v7.5.3` 。現在、現在のクラスターよりも高いバージョンへのアップグレードのみが許可されており、ダウングレードは許可されていません。また、ナイトリーバージョンへのアップグレードも許可されていません。

## オプション {#options}

### &#x20;--force {#force}

-   クラスターをアップグレードするには、クラスターが現在起動していることを確認する必要があります。場合によっては、クラスターが起動していないときにアップグレードする必要があるかもしれません。このとき、 `--force`使用してアップグレード中のエラーを無視し、バイナリ ファイルを強制的に置き換えてクラスターを起動することができます。
-   データ型: `BOOLEAN`
-   デフォルト: false

> **注記：**
>
> サービスを提供しているクラスターのアップグレードを強制すると、サービスが利用できなくなる可能性があります。起動されていないクラスターは、アップグレードが成功すると自動的に起動されます。

### --transfer-timeout {#transfer-timeout}

-   PD または TiKV をアップグレードする場合、アップグレードされたノードのリーダーが最初に他のノードに移行されます。移行プロセスには時間がかかり、 `-transfer-timeout`オプションで最大待機時間 (秒単位) を設定できます。タイムアウト後、待機はスキップされ、サービスは直接アップグレードされます。
-   データ型: `uint`
-   デフォルト: 600

> **注記：**
>
> 待機をスキップしてサービスを直接アップグレードすると、サービスのパフォーマンスが不安定になる可能性があります。

### --設定チェックを無視 {#ignore-config-check}

-   バイナリが更新されると、 `<binary> --config-check <config-file>`を使用して TiDB、TiKV、および PD コンポーネントの構成チェックが実行されます。 `<binary>`新しくデプロイされたバイナリへのパスであり、 `<config-file>`ユーザー構成に基づいて生成された構成ファイルです。 このチェックをスキップするには、 `--ignore-config-check`オプションを使用できます。
-   データ型: `BOOLEAN`
-   デフォルト: false

### &#x20;--offline {#offline}

-   現在のクラスターが実行中でないことを宣言します。このオプションを指定すると、 TiUP はサービス リーダーを別のノードに移動したり、サービスを再起動したりせず、クラスター コンポーネントのバイナリ ファイルのみを置き換えます。
-   データ型: `BOOLEAN`
-   このオプションは、値`false`でデフォルトで無効になっています。このオプションを有効にするには、このオプションをコマンドに追加し、値`true`を渡すか、値を渡さないようにする必要があります。

### -h, --help {#h-help}

-   ヘルプ情報を出力します。
-   データ型: `BOOLEAN`
-   デフォルト: false

## 出力 {#output}

アップグレードの進行状況のログ。

[&lt;&lt; 前のページに戻る - TiUP クラスタコマンド リスト](/tiup/tiup-component-cluster.md#command-list)
