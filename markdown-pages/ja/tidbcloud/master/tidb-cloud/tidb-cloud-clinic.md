---
title: TiDB Cloud Clinic
summary: 高度な監視と診断にTiDB Cloud Clinic を使用する方法を学習します。
---

# TiDB Cloudクリニック {#tidb-cloud-clinic}

TiDB Cloud Clinic は、 TiDB Cloud上で高度な監視および診断機能を提供します。詳細な分析と実用的な洞察により、パフォーマンスの問題を迅速に特定し、データベースを最適化し、全体的なパフォーマンスを向上できるように設計されています。

![tidb-cloud-clinic](https://docs-download.pingcap.com/media/images/docs/tidb-cloud/tidb-cloud-clinic.png)

> **注記：**
>
> 現在、 TiDB Cloud Clinic は[TiDB Cloud専用](/tidb-cloud/select-cluster-tier.md#tidb-cloud-dedicated)クラスターでのみ使用できます。

## 前提条件 {#prerequisites}

TiDB Cloud Clinic は、**エンタープライズ**または**プレミアム**サポート プランに加入している組織のみが利用できます。

## クラスタページをビュー {#view-the-cluster-page}

**クラスタ**ページを表示するには、次の手順を実行します。

1.  [TiDB Cloudクリニック コンソール](https://clinic.pingcap.com/)にログインし、 **「TiDB アカウントで続行」**を選択して、 TiDB Cloudログイン ページに入ります。

2.  組織リストから、対象の組織を選択します。選択したプロジェクト内のクラスターが表示されます。

3.  ターゲット クラスターの名前をクリックします。クラスターの概要ページが表示され、次のようなクラスターの詳細情報を表示できます。

    -   高度なメトリクス
    -   最も遅いクエリ
    -   トップSQL
    -   ベンチマークレポート

## 高度な指標を監視する {#monitor-advanced-metrics}

TiDB Cloud Clinic は Grafana を使用して、TiDB クラスターの包括的なメトリック セットを提供します。これらのメトリックには、TiDB、TiKV、 TiFlash、 BR、Lightning、TiCDC、TiDB リソース制御、および TiDB パフォーマンスのダッシュボードが含まれます。

メトリクス ダッシュボードを表示するには、次の手順を実行します。

1.  [TiDB Cloudクリニック コンソール](https://clinic.pingcap.com/)で、クラスターの**「クラスタ」**ページに移動します。

2.  **「メトリック」**をクリックします。

3.  表示するダッシュボードの名前をクリックします。ダッシュボードが表示されます。

高度なメトリックの保持ポリシーは 90 日間です。

## 最も遅いクエリを分析する {#analyze-top-slow-queries}

デフォルトでは、300 ミリ秒を超える時間がかかる SQL クエリは遅いクエリと見なされます。

TiDB Cloudコンソールのデフォルトの[**遅いクエリ**](/tidb-cloud/tune-performance.md#slow-query)ページでは、パフォーマンスに影響を与えるクエリを特定することが難しい場合があります。特に、低速クエリが多数あるクラスターでは困難です。TiDB TiDB Cloud Clinic の**Top Slow Queries**機能は、低速クエリ ログに基づいて集計分析を提供します。この機能を使用すると、パフォーマンスの問題があるクエリを簡単に特定できるため、全体的なパフォーマンス チューニング時間を少なくとも半分に短縮できます。

上位の低速クエリには、SQL ダイジェストによって集計された上位 10 件のクエリが次のディメンションで並べ替えられて表示されます。

-   合計レイテンシー
-   最大レイテンシー
-   平均レイテンシー
-   合計メモリ
-   最大メモリ
-   平均メモリ
-   合計数

クラスター内の遅いクエリを表示するには、次の手順を実行します。

1.  [TiDB Cloudクリニック コンソール](https://clinic.pingcap.com/)で、クラスターの**「クラスタ」**ページに移動します。

2.  **[スロークエリ]**をクリックします。

3.  最も遅いクエリがテーブルに表示されます。結果はさまざまな列で並べ替えることができます。

4.  (オプション) リスト内の遅いクエリをクリックすると、詳細な実行情報が表示されます。

5.  (オプション) 時間範囲、データベース、またはステートメントの種類別に遅いクエリをフィルターします。

低速クエリの保持ポリシーは 7 日間です。

詳細については[TiDB ダッシュボードの遅いクエリ](https://docs.pingcap.com/tidb/stable/dashboard-slow-query)参照してください。

## TopSQLを監視する {#monitor-topsql}

TiDB Cloud Clinic は TopSQL 情報を提供し、データベース内の各 SQL ステートメントの CPU オーバーヘッドをリアルタイムで監視し、視覚的に調べることができます。これにより、データベースのパフォーマンスの問題を最適化して解決できます。

TopSQL を表示するには、次の手順を実行します。

1.  [TiDB Cloudクリニック コンソール](https://clinic.pingcap.com/)で、クラスターの**「クラスタ」**ページに移動します。

2.  **TopSQL**をクリックします。

3.  特定の TiDB または TiKV インスタンスを選択して、その負荷を観察します。時間ピッカーを使用するか、チャートで時間範囲を選択して、分析を絞り込むことができます。

4.  TopSQL によって表示されるグラフと表を分析します。

詳細については[TiDBダッシュボードのTopSQL](https://docs.pingcap.com/tidb/stable/top-sql)参照してください。

## ベンチマークレポートを生成する {#generate-benchmark-reports}

**ベンチマーク レポート**機能は、パフォーマンス テスト中に TiDB クラスターのパフォーマンスの問題を特定するのに役立ちます。ストレス テストを完了したら、ベンチマーク レポートを生成してクラスターのパフォーマンスを分析できます。レポートでは、特定されたボトルネックが強調表示され、最適化の提案が提供されます。これらの提案を適用した後、ストレス テストをもう一度実行して新しいベンチマーク レポートを生成し、パフォーマンスの改善を比較できます。

ベンチマーク レポートを生成するには、次の手順を実行します。

1.  [TiDB Cloudクリニック コンソール](https://clinic.pingcap.com/)で、クラスターの**「クラスタ」**ページに移動します。

2.  **ベンチマークレポート**をクリックします。

3.  ベンチマーク レポートで分析する時間範囲を選択します。

4.  ベンチマーク レポートを生成するには、 **[レポートの作成] を**クリックします。

5.  レポートの生成が完了するまで待ちます。レポートの準備ができたら、 **「ビュー」**をクリックして開きます。
