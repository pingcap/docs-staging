---
title: Configure Maintenance Window
summary: クラスターのメンテナンス ウィンドウを構成する方法を学習します。
---

# メンテナンスウィンドウの設定 {#configure-maintenance-window}

メンテナンス ウィンドウとは、 TiDB Cloudサービスの信頼性、セキュリティ、パフォーマンスを確保するために、オペレーティング システムの更新、セキュリティ パッチ、インフラストラクチャのアップグレードなどの計画されたメンテナンス タスクが自動的に実行される指定された時間枠です。

メンテナンス期間中、メンテナンスは TiDB 専用クラスターで 1 つずつ実行されるため、全体的な影響は最小限に抑えられます。一時的な接続の中断や QPS の変動が発生する可能性はありますが、クラスターは引き続き利用可能であり、既存のデータのインポート、バックアップ、復元、移行、およびレプリケーション タスクは引き続き正常に実行できます。

メンテナンス ウィンドウを構成すると、メンテナンス タスクを簡単にスケジュールおよび管理して、メンテナンスの影響を最小限に抑えることができます。たとえば、メンテナンス ウィンドウの開始時刻を設定して、アプリケーション ワークロードのピーク時間を避けることができます。

> **注記：**
>
> メンテナンス ウィンドウ機能は[TiDB専用クラスタ](/tidb-cloud/select-cluster-tier.md#tidb-dedicated)でのみ使用できます。

## メンテナンス期間中に許可される操作と許可されない操作 {#allowed-and-disallowed-operations-during-a-maintenance-window}

メンテナンス期間中は、一部の操作は許可されますが、一部の操作は許可されません。

-   許可される操作:

    -   SQL操作
    -   クラスターを作成する
    -   クラスターを削除する
    -   バックアップタスクを作成する
    -   クラスターを復元する
    -   クラスターページにアクセスする

-   許可されていない操作:

    -   クラスターを変更、一時停止、再開する
    -   TiDB Cloudコンソールでセキュリティ設定を変更する
    -   プライベートリンクを作成するか、VPCピアリングを構成する
    -   インポートタスク、移行ジョブ、または変更フィードを作成する
    -   移行ジョブまたは変更フィードのスケール仕様

## メンテナンス期間の通知を受け取る {#get-notifications-for-maintenance-windows}

潜在的な中断を回避するには、メンテナンス スケジュールを把握し、それに応じて操作を計画することが重要です。

メンテナンス ウィンドウごとに、 TiDB Cloud は次の時点ですべてのプロジェクト メンバーに 4 つの電子メール通知を送信します。

-   メンテナンス期間開始の2週間前（緊急メンテナンスタスクを除く）
-   メンテナンス期間開始の72時間前
-   メンテナンスウィンドウが開始される時間
-   メンテナンスウィンドウが完了した時間

## メンテナンスウィンドウのビューと構成 {#view-and-configure-maintenance-windows}

定期的なメンテナンスにより、セキュリティの脅威、パフォーマンスの問題、信頼性の低下からTiDB Cloud を保護するために重要な更新が確実に実行されます。そのため、メンテナンス ウィンドウはデフォルトで有効になっており、無効にすることはできません。

メンテナンス ウィンドウが計画されている場合、ウィンドウのデフォルトの開始時刻は、対象週の水曜日の午前 3 時 ( TiDB Cloud組織のタイム ゾーンに基づく) になります。

次のように、開始時刻を希望の時間に変更したり、メンテナンス タスクを期限まで延期したりできます。

1.  [TiDB Cloudコンソール](https://tidbcloud.com)にログインします。

2.  クリック<mdsvgicon name="icon-left-projects">左下隅で、複数のプロジェクトがある場合は対象プロジェクトに切り替えて、 **[プロジェクト設定]**をクリックします。</mdsvgicon>

3.  プロジェクトの**「プロジェクト設定」**ページで、左側のナビゲーション ペインの**「メンテナンス」**をクリックします。

    -   メンテナンスタスクが表示されている場合は、説明、予定開始時刻、期限を確認してください。メンテナンスタスクは指定された時間に開始されます。

    -   メンテナンス データがない場合、最近メンテナンス タスクがスケジュールされていないことを意味します。

4.  （オプション）クリック<svg width="15" height="15" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="mantine-1o1jehl"><path d="M11 3.99998H6.8C5.11984 3.99998 4.27976 3.99998 3.63803 4.32696C3.07354 4.61458 2.6146 5.07353 2.32698 5.63801C2 6.27975 2 7.11983 2 8.79998V17.2C2 18.8801 2 19.7202 2.32698 20.362C2.6146 20.9264 3.07354 21.3854 3.63803 21.673C4.27976 22 5.11984 22 6.8 22H15.2C16.8802 22 17.7202 22 18.362 21.673C18.9265 21.3854 19.3854 20.9264 19.673 20.362C20 19.7202 20 18.8801 20 17.2V13M7.99997 16H9.67452C10.1637 16 10.4083 16 10.6385 15.9447C10.8425 15.8957 11.0376 15.8149 11.2166 15.7053C11.4184 15.5816 11.5914 15.4086 11.9373 15.0627L21.5 5.49998C22.3284 4.67156 22.3284 3.32841 21.5 2.49998C20.6716 1.67156 19.3284 1.67155 18.5 2.49998L8.93723 12.0627C8.59133 12.4086 8.41838 12.5816 8.29469 12.7834C8.18504 12.9624 8.10423 13.1574 8.05523 13.3615C7.99997 13.5917 7.99997 13.8363 7.99997 14.3255V16Z" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path></svg>メンテナンス ウィンドウの開始時刻を変更します。その週にメンテナンス ウィンドウが計画されている場合にのみ、指定された開始時刻にメンテナンスが実行されることに注意してください。

5.  スケジュールされたメンテナンス タスクの開始時刻を延期するには、 **[アクション]**列の**[延期]**をクリックし、期限前の次の実行可能なメンテナンス ウィンドウに変更します。

    期限を過ぎてメンテナンス作業を延期する必要がある場合は、 [TiDB Cloudサポート](/tidb-cloud/tidb-cloud-support.md#tidb-cloud-support)連絡してサポートを受けてください。

## よくある質問 {#faqs}

-   メンテナンスタスクとは何ですか?

    メンテナンス タスクには通常、オペレーティング システムの更新、セキュリティ パッチ、インフラストラクチャのアップグレードが含まれます。

-   メンテナンスウィンドウを無効にすることはできますか?

    いいえ。メンテナンス ウィンドウはデフォルトで有効になっており、無効にすることはできません。メンテナンス ウィンドウの開始時刻を変更したり、メンテナンス タスクを期限の 2 ～ 4 週間まで延期したりできます。詳細については、 [メンテナンスウィンドウのビューと構成](#view-and-configure-maintenance-windows)参照してください。

-   メンテナンスウィンドウはどのくらい続きますか?

    状況によります。プロジェクトごとに、対象となる TiDB クラスターに対して 1 つずつメンテナンスが実行されます。メンテナンスの期間は、クラスターの数、クラスター データのサイズ、および実行するメンテナンス タスクによって異なります。

-   メンテナンス タスクは、どのステータスのクラスターでも実行されますか?

    いいえ。TiDB TiDB Cloud は、クラスターでメンテナンス タスクを実行する前にクラスターのステータスを確認します。

    -   クラスターが**作成**中または**一時停止中の**ステータスの場合、メンテナンス タスクは必要ありません。
    -   クラスターが自動または手動バックアップを実行している場合、現在のバックアップが正常に完了するまでメンテナンスは延期され、トリガーされます。データ量が多いクラスターの場合、バックアップ プロセスに 12 時間など長い時間がかかる可能性があることに注意してください。クラスターへの影響を最小限に抑えるには、バックアップの開始時間とメンテナンス ウィンドウを慎重に設定することをお勧めします。
    -   クラスターが他のステータスの場合、メンテナンス タスクはスケジュールどおりに開始されます。
