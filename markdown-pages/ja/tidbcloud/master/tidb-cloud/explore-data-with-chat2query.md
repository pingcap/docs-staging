---
title: Explore Your Data with AI-Assisted SQL Editor
summary: TiDB Cloudコンソールで AI 支援 SQL エディターを使用してデータの価値を最大化する方法を学びます。
---

# AI 支援 SQL エディターでデータを探索 {#explore-your-data-with-ai-assisted-sql-editor}

[TiDB Cloudコンソール](https://tidbcloud.com/)に組み込まれた AI 支援 SQL エディターを使用して、データの価値を最大化できます。

SQL エディターでは、SQL クエリを手動で記述するか、macOS では<kbd>⌘</kbd> + <kbd>I</kbd> (Windows または Linux では<kbd>Control</kbd> + <kbd>I</kbd> ) を押して[Chat2Query (ベータ版)](/tidb-cloud/tidb-cloud-glossary.md#chat2query) SQL クエリを自動的に生成するように指示することができます。これにより、ローカル SQL クライアントを使用せずにデータベースに対して SQL クエリを実行できます。クエリ結果をテーブルやグラフで直感的に表示し、クエリ ログを簡単に確認できます。

## ユースケース {#use-cases}

SQL エディターの推奨される使用例は次のとおりです。

-   Chat2Query の AI 機能を活用して、複雑な SQL クエリを即座に生成、デバッグ、または書き換えます。
-   TiDB の MySQL 互換性をすばやくテストします。
-   独自のデータセットを使用して、TiDB の SQL 機能を簡単に探索できます。

## 制限事項 {#limitations}

-   AI によって生成された SQL クエリは 100% 正確ではない可能性があり、それを改良する必要がある場合があります。
-   SQL エディターは、AWS でホストされている v6.5.0 以降の TiDB クラスターでのみサポートされます。
-   SQL エディターは、デフォルトで[TiDB サーバーレス](/tidb-cloud/select-cluster-tier.md#tidb-serverless)クラスターで使用できます。SQL エディターと Chat2Query を[TiDB専用](/tidb-cloud/select-cluster-tier.md#tidb-dedicated)クラスターで使用するには、 [TiDB Cloudサポート](/tidb-cloud/tidb-cloud-support.md)お問い合わせください。

## SQL エディターにアクセスする {#access-sql-editor}

1.  プロジェクトの[**クラスター**](https://tidbcloud.com/console/clusters)ページに移動します。

    > **ヒント：**
    >
    > 複数のプロジェクトがある場合は、<mdsvgicon name="icon-left-projects">左下隅にある をクリックして、別のプロジェクトに切り替えます。</mdsvgicon>

2.  クラスター名をクリックし、左側のナビゲーション ペインで**[SQL エディター]**をクリックします。

    > **注記：**
    >
    > 次の場合、 **SQL エディターの**エントリは灰色で表示され、クリックできません。
    >
    > -   TiDB 専用クラスターは v6.5.0 より前のバージョンです。SQL エディターを使用するには、契約[TiDB Cloudサポート](/tidb-cloud/tidb-cloud-support.md)結んでクラスターをアップグレードする必要があります。
    > -   TiDB 専用クラスターが作成されたばかりで、SQL エディターの実行環境はまだ準備中です。この場合は、数分待つと Chat2Query が利用可能になります。
    > -   TiDB 専用クラスターは[一時停止](/tidb-cloud/pause-or-resume-tidb-cluster.md)です。

## AI による SQL クエリの生成を有効または無効にする {#enable-or-disable-ai-to-generate-sql-queries}

PingCAP は、ユーザーデータのプライバシーとセキュリティを最優先に考えています。SQL エディターの Chat2Query の AI 機能は、SQL クエリを生成するためにデータベース スキーマにアクセスするだけでよく、データ自体にアクセスする必要はありません。詳細については、 [Chat2Query プライバシーFAQ](https://www.pingcap.com/privacy-policy/privacy-chat2query)参照してください。

Chat2Query に初めてアクセスすると、PingCAP と OpenAI がコード スニペットを使用してサービスを調査および改善することを許可するかどうかを尋ねるダイアログが表示されます。

-   AI が SQL クエリを生成できるようにするには、チェックボックスをオンにして、 **「保存して開始」を**クリックします。
-   AI による SQL クエリの生成を無効にするには、このダイアログを直接閉じます。

初回アクセス後も、次のように AI 設定を変更できます。

-   AI を有効にするには、Chat2Query の右上隅にある**「データ探索のための AI パワーを有効にする」**をクリックします。
-   AIを無効にするには、<mdsvgicon name="icon-top-account-settings"> [TiDB Cloudコンソール](https://tidbcloud.com/)の左下隅にある**[アカウント設定]**をクリックし、 **[プライバシー]**タブをクリックして、 **[AI を活用したデータ探索]**オプションを無効にします。</mdsvgicon>

## SQLクエリを記述して実行する {#write-and-run-sql-queries}

SQL エディターでは、独自のデータセットを使用して SQL クエリを記述および実行できます。

1.  SQL クエリを記述します。

    <SimpleTab>
     <div label="macOS">

    macOSの場合:

    -   AI が有効になっている場合は、 **⌘ + I**を押して指示に従い、 **Enter キー**を押すだけで、AI が SQL クエリを自動的に生成します。

        Chat2Query によって生成された SQL クエリの場合、 **「承認」**をクリックしてクエリを承認し、編集を続行します。クエリが要件を満たしていない場合は、 **「破棄」を**クリックして拒否します。または、 **「再生成」**をクリックして Chat2Query から新しいクエリを要求します。

    -   AI が無効になっている場合は、SQL クエリを手動で記述します。

    </div>

    <div label="Windows/Linux">

    Windows または Linux の場合:

    -   AI が有効になっている場合は、 **Ctrl + I**を押して指示に従い、 **Enter キー**を押すだけで、AI が SQL クエリを自動的に生成します。

        Chat2Query によって生成された SQL クエリの場合、 **「承認」**をクリックしてクエリを承認し、編集を続行します。クエリが要件を満たしていない場合は、 **「破棄」を**クリックして拒否します。または、 **「再生成」**をクリックして Chat2Query から新しいクエリを要求します。

    -   AI が無効になっている場合は、SQL クエリを手動で記述します。

    </div>
     </SimpleTab>

2.  SQL クエリを実行します。

    <SimpleTab>
     <div label="macOS">

    macOSの場合:

    -   エディタにクエリが1つしかない場合は、それを実行するには**⌘ + Enter**を押すか、 <svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.70001 20.7756C6.01949 20.3926 6.00029 19.5259 6.00034 19.0422L6.00034 12.1205L6 5.33028C6 4.75247 6.00052 3.92317 6.38613 3.44138C6.83044 2.88625 7.62614 2.98501 7.95335 3.05489C8.05144 3.07584 8.14194 3.12086 8.22438 3.17798L19.2865 10.8426C19.2955 10.8489 19.304 10.8549 19.3126 10.8617C19.4069 10.9362 20 11.4314 20 12.1205C20 12.7913 19.438 13.2784 19.3212 13.3725C19.307 13.3839 19.2983 13.3902 19.2831 13.4002C18.8096 13.7133 8.57995 20.4771 8.10002 20.7756C7.60871 21.0812 7.22013 21.0683 6.70001 20.7756Z" fill="currentColor"></path></svg>**走る**。

    -   エディターに複数のクエリがある場合、そのうちの 1 つまたは複数のクエリを順番に実行するには、カーソルで対象クエリの行を選択し、 **⌘ + Enter**キーを押すか、 **[実行]**をクリックします。

    -   エディター内のすべてのクエリを順番に実行するには、 **⇧ + ⌘ + Enter**を押すか、カーソルですべてのクエリの行を選択して**「実行」**をクリックします。

    </div>

    <div label="Windows/Linux">

    Windows または Linux の場合:

    -   エディタにクエリが1つしかない場合は、それを実行するには**Ctrl + Enter**を押すか、 <svg width="1rem" height="1rem" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M6.70001 20.7756C6.01949 20.3926 6.00029 19.5259 6.00034 19.0422L6.00034 12.1205L6 5.33028C6 4.75247 6.00052 3.92317 6.38613 3.44138C6.83044 2.88625 7.62614 2.98501 7.95335 3.05489C8.05144 3.07584 8.14194 3.12086 8.22438 3.17798L19.2865 10.8426C19.2955 10.8489 19.304 10.8549 19.3126 10.8617C19.4069 10.9362 20 11.4314 20 12.1205C20 12.7913 19.438 13.2784 19.3212 13.3725C19.307 13.3839 19.2983 13.3902 19.2831 13.4002C18.8096 13.7133 8.57995 20.4771 8.10002 20.7756C7.60871 21.0812 7.22013 21.0683 6.70001 20.7756Z" fill="currentColor"></path></svg>**走る**。

    -   エディターに複数のクエリがある場合、そのうちの 1 つまたは複数のクエリを順番に実行するには、カーソルで対象クエリの行を選択し、 **Ctrl + Enter**キーを押すか、 **[実行]**をクリックします。

    -   エディター内のすべてのクエリを順番に実行するには、 **Shift + Ctrl + Enter**を押すか、カーソルですべてのクエリの行を選択して**「実行」**をクリックします。

    </div>
     </SimpleTab>

クエリを実行すると、ページの下部にクエリ ログと結果がすぐに表示されます。

> **注記：**
>
> 返される結果のサイズ制限は 8 MiB です。

## Chat2Query を使用して SQL クエリを書き換える {#rewrite-sql-queries-using-chat2query}

SQL エディターでは、Chat2Query を使用して既存の SQL クエリを書き換え、パフォーマンスを最適化したり、エラーを修正したり、その他の特定の要件を満たしたりできます。

1.  カーソルを使用して、書き換えたい SQL クエリの行を選択します。

2.  オペレーティング システムのキーボード ショートカットを使用して、書き換え用の Chat2Query を呼び出します。

    -   macOSでは<kbd>⌘</kbd> + <kbd>I</kbd>
    -   Windows または Linux では<kbd>Control</kbd> + <kbd>I</kbd>

    指示を入力した後、 **Enter キー**を押して、AI に書き換えを処理させます。

3.  Chat2Query を呼び出すと、提案された書き換えと次のオプションが表示されます。

    -   **承認**: これをクリックすると、提案された書き換えを承認して編集を続行します。
    -   **破棄**: 提案された書き換えが期待どおりでない場合は、これをクリックします。
    -   **再生成**: フィードバックまたは追加の指示に基づいて Chat2Query に別の書き換えを要求するには、これをクリックします。

> **注記：**
>
> Chat2Query は AI アルゴリズムを使用して最適化と修正を提案します。クエリを確定する前に、これらの提案を慎重に確認することをお勧めします。

## SQL ファイルの管理 {#manage-sql-files}

SQL エディターでは、SQL クエリをさまざまな SQL ファイルに保存し、次のように SQL ファイルを管理できます。

-   SQL ファイルを追加するには、 **「SQL ファイル」**タブで**+ を**クリックします。
-   SQL ファイルの名前を変更するには、ファイル名の上にカーソルを移動し、ファイル名の横にある**[...]**をクリックして、 **[名前の変更]**を選択します。
-   SQL ファイルを削除するには、カーソルをファイル名の上に移動し、ファイル名の横にある**[...]**をクリックして、 **[削除**] を選択します。 **[SQL ファイル**] タブに SQL ファイルが 1 つしかない場合は、削除できないことに注意してください。

## API経由でChat2Queryにアクセスする {#access-chat2query-via-api}

UI 経由で Chat2Query にアクセスするだけでなく、API 経由で Chat2Query にアクセスすることもできます。そのためには、まず Chat2Query データ アプリを作成する必要があります。

Chat2Query では、次のように Chat2Query データ アプリにアクセスしたり、作成したりできます。

1.  右上隅の**「...」**をクリックし、 **「API 経由で Chat2Query にアクセス」**をクリックします。
2.  表示されたダイアログで、次のいずれかを実行します。

    -   新しい Chat2Query データ アプリを作成するには、 **[新しい Chat2Query データ アプリ]**をクリックします。
    -   既存の Chat2Query データ アプリにアクセスするには、対象のデータ アプリの名前をクリックします。

詳細については[Chat2Query APIを使い始める](/tidb-cloud/use-chat2query-api.md)参照してください。

## SQL ファイルからエンドポイントを生成する {#generate-an-endpoint-from-a-sql-file}

TiDB クラスターの場合、 TiDB Cloud は、カスタム API エンドポイントを使用して HTTPS リクエスト経由でTiDB Cloudデータにアクセスできる[データ サービス (ベータ版)](/tidb-cloud/data-service-overview.md)機能を提供します。SQL エディターでは、次の手順を実行して、SQL ファイルからデータ サービス (ベータ) のエンドポイントを生成できます。

1.  カーソルをファイル名の上に移動し、ファイル名の横にある**[...]**をクリックして、 **[エンドポイントの生成]**を選択します。
2.  **[エンドポイントの生成]**ダイアログ ボックスで、エンドポイントを生成するデータ アプリを選択し、エンドポイント名を入力します。
3.  **「生成」を**クリックします。エンドポイントが生成され、その詳細ページが表示されます。

詳細については[エンドポイントを管理する](/tidb-cloud/data-service-manage-endpoint.md)参照してください。

## SQLエディタの設定を管理する {#manage-sql-editor-settings}

SQL エディターでは、次の設定を変更できます。

-   クエリ結果の最大行数
-   **スキーマ**タブにシステムデータベーススキーマを表示するかどうか

設定を変更するには、次の手順を実行します。

1.  **SQL エディター**の右上隅で、 **[...]**をクリックし、 **[設定]**を選択します。
2.  必要に応じて設定を変更してください。
3.  **「保存」を**クリックします。
